<!DOCTYPE html>
<!--[if IE 8]> <html lang="en" class="ie8"> <![endif]-->
<!--[if IE 9]> <html lang="en" class="ie9"> <![endif]-->
<!--[if !IE]><!-->
<html lang="en">
<!--<![endif]-->

<head>
    <title>Apk or App bundle generation using command line</title>
    <!-- Meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Responsive HTML5 Website Landing Page for Developers">
    <meta name="author" content="Xiaoying Riley at 3rd Wave Media">
    <link rel="shortcut icon" href="favicon.ico">
    <link href='http://fonts.googleapis.com/css?family=Lato:300,400,300italic,400italic' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Montserrat:400,700' rel='stylesheet' type='text/css'>
    <!-- Global CSS -->
    <link rel="stylesheet" href="assets/plugins/bootstrap/css/bootstrap.min.css">
    <!-- Plugins CSS -->
    <link rel="stylesheet" href="assets/plugins/font-awesome/css/font-awesome.css">

    <!-- github calendar css -->
    <link rel="stylesheet" href="assets/plugins/github-calendar/dist/github-calendar.css" />
    <!-- github acitivity css -->
    <link rel="stylesheet" href="assets/plugins/github-activity/src/github-activity.css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/octicons/2.0.2/octicons.min.css">

    <!-- Theme CSS -->
    <link id="theme-style" rel="stylesheet" href="assets/css/styles.css">
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>

<body>
    <header class="header">
        <div class="container">
            <div class="profile-content pull-left">
                <h1 class="name">Apk or App bundle generation using command line</h1>
            </div>
        </div>
        <!--//container-->
    </header>

    <div class="container sections-wrapper">
        <div class="content">
            <p>Sharing the apk with tester is one of the important task in our build cycle. Whenever a new feature is introduce in our app, we need to test it immediately and since anyone can generate apk to share, we needed to setup a process to share a
                common apk. So we decided to generate signed apk for debug version, so that tester don't have to uninstall app every time and also we can share apk using common medium. Since sometimes gradle build times take lots of time we decided to
                use gradle script using gradlew to generate apk.</p>
            <p>First ceate keystore file using android studio. You can create it from build -> generate signed apk. You will get option to generate keystore file.<br>After that create a .properties file and add the info as shown below.</p>
            <ul>
                <li>
                    <b class="store-file">
                        <span class="title"><strong>storeFile = keystore.jks</strong></span>
                    </b>
                </li>
            </ul>
            <ul>
                <li>
                    <b class="store-password">
                        <span class="title"><strong>storePassword= keystore password</strong></span>
                    </b>
                </li>
            </ul>
            <ul>
                <li>
                    <b class="key-alias">
                        <span class="title"><strong>keyAlias= key alias</strong></span>
                    </b>
                </li>
            </ul>
            <ul>
                <li>
                    <b class="key-password">
                        <span class="title"><strong>keyPassword= key password</strong></span>
                    </b>
                </li>
            </ul>
            <p>Read these data from properties file in gradle</p>
            <pre>
                <code class="read-properties-file">
                    android{
                        signingConfigs {
                           //you read diiferent properties according to different flavours
                           flavour_name_sign_config {
                           def propsFile = rootProject.file('keystore.properties')
                           if (propsFile.exists()) {
                                def props = new Properties()
                                props.load(new FileInputStream(propsFile))
                                storeFile = file(props['storeFile'])
                                storePassword = props['storePassword']
                                keyAlias = props['keyAlias']
                                keyPassword = props['keyPassword']
                            }
                       }
                    }
                </code>
            </pre>
            <p>But to use these values we have to use signingConfigs in productFlavors</p>
            <pre>
                <code class = "gradle-file-code">
                    productFlavors{
                       flavour_name{
                         signingConfig signingConfigs.flavour_name_sign_config
                       }
                    }
                </code>
            </pre>
            <p>Now to generate apk or bundle run script in terminal like</p>
            <pre>
                <code class = "script-code-apk">
                    ./gradlew bundleDebug or ./gradlew bundleDevDebug
                </code>
            </pre>
            <ul>
                <li>
                    <b class="bundle-run">
                        If you want to generate app bundle then
                    </b>
                </li>
            </ul>
            <pre>
                <code class = "script-code-bundle">
                    ./gradlew bundleDebug or ./gradlew bundleDevDebug
                </code>
            </pre>
            <ul>
                <li>
                    <b class="apk-install">
                        You can also install app in connected device using script
                    </b>
                </li>
            </ul>
            <pre>
                <code class ="script-install-apk">
                    ./gradlew installDebug
                </code>
            </pre>
        </div>
    </div>
</body>